---
layout: single
title: "[flutter] 검색창 구현"
---

### 1. 클래스와 변수 만들기

---

검색창을 구현할 class SearchBar를 생성하고, 사용할 변수들을 정의해준다.  
각 변수들에 대한 설명은 아래와 같다.

`_filter`: Textfield를 관리할 TextEditingController

`names`: 검색의 대상이 되는 전체 list

`filteredNames`: 검색창에 의해 filtered된 list

`_searchIcon`: 검색 아이콘

`_appbarTitle`: appbar에 들어갈 기본 메세지

```dart
class SearchBar extends StatefulWidget {
  const SearchBar({Key key}) : super(key: key);

  @override
  _SearchBarState createState() => _SearchBarState();
}

class _SearchBarState extends State<SearchBar> {

  final TextEditingController _filter = new TextEditingController(); // 필터

  String _searchText = ""; //검색창에 입력한 text

  List names = []; // dataclass.name 리스트

  List filteredNames = []; // searchtext에 의해 필터링된 name

  Icon _searchIcon = Icon(Icons.search); //검색 아이콘

  Widget _appBarTitle = Text('Search Example'); // Search Example
```

### 2. data를 가져오는 함수 생성

---

원하는 데이터를 names, filteredNames에 할당하는 초기화 함수를 생성한다.  
이는 앱을 처음 실행할 때, \_searchText가 비어있을 때 실행된다.

```dart
  //리스트를 변수로 가져오는 함수
  void _getNames () async {
    // TODO: dataclass에서 list를 뽑는 코드가 추가되어야 함
    setState(() {
      names = datalist;
      filteredNames = datalist;
    });
  }
```

### 3. ui 구현하기

---

검색창 ui를 구현한 build widget을 생성한다.

```dart
Widget build(BuildContext context) {
    return Scaffold(
      appBar: _buildBar(context),
      body: Container(
        child: _buildList(),
      ),
    );
  }

Widget _buildBar(BuildContext context) {
  return AppBar(
    centerTitle: true,
    title: _appBarTitle,
    leading: IconButton(
      icon: _searchIcon,
      onPressed: _searchPressed,
    ),
  );
}
```
